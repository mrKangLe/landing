
<!DOCTYPE html>
<html lang="vi">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Yến Chưng</title>
  <style>
    body { font-family: Arial, sans-serif; margin: 0; background: #fffbe9; padding-bottom: 180px; }
    header { text-align: center; padding: 24px; background: #fffbf5; }
    h1 { margin: 0; color: #d35400; }

    .grid {
      display: grid;
      grid-template-columns: repeat(auto-fill, minmax(160px, 1fr));
      gap: 12px;
      padding: 20px;
    }

    .product-card {
      background: #fff; border-radius: 10px; padding: 10px;
      box-shadow: 0 2px 8px rgba(0,0,0,0.05); text-align: center;
    }

    .product-card img {
      width: 100%; height: auto; border-radius: 8px;
    }

    h3 {
      font-size: 15px; margin: 8px 0 4px;
    }

    select { width: 100%; padding: 6px; margin-top: 4px; border-radius: 6px; }

    .btn {
      background: #ff8000; color: white; font-weight: bold; padding: 6px 12px;
      border: none; border-radius: 6px; margin-top: 8px; cursor: pointer;
    }

    .cart-popup {
      display: none; position: fixed; bottom: 0; left: 0; width: 100%;
      background: #fff; box-shadow: 0 -2px 10px rgba(0,0,0,0.15);
      border-radius: 12px 12px 0 0; padding: 16px; z-index: 1001;
    }

    .cart-header {
      display: flex; justify-content: space-between; align-items: center;
    }

    .cart-header h2 { margin: 0; font-size: 18px; }

    .close-btn {
      background: #ffdddd; border: none; color: #c00; padding: 6px 10px;
      border-radius: 8px; cursor: pointer; font-weight: bold;
    }

    .cart-item { margin-top: 10px; border-bottom: 1px dashed #ccc; padding-bottom: 6px; }

    #popup-add {
      display: none; position: fixed; top: 20px; left: 50%; transform: translateX(-50%);
      background: #fff0c4; color: #333; padding: 8px 16px; border-radius: 6px;
      box-shadow: 0 2px 6px rgba(0,0,0,0.1); font-size: 14px; z-index: 999;
    }

    #floating-cart-btn {
      position: fixed; bottom: 20px; right: 20px;
      background: #ff8000; color: white; font-weight: bold;
      padding: 10px 14px; border-radius: 999px; font-size: 14px;
      box-shadow: 0 2px 8px rgba(0,0,0,0.2); cursor: pointer; z-index: 998;
    }

    @media (max-width: 768px) {
      .grid { grid-template-columns: 1fr; }
    }
  </style>
</head>
<body>

<header>
  <h1>YẾN CHƯNG 11 VỊ</h1>
</header>

<div class="grid">

  <div class="product-card">
    <img src="Image (1).png" alt="Yến chưng 1">
    <h3>Yến chưng 1</h3>
    <select id="size1">
      <option value="55">75ml – 55.000đ</option>
      <option value="85" selected>100ml – 85.000đ</option>
      <option value="110">150ml – 110.000đ</option>
      <option value="170">200ml – 170.000đ</option>
    </select>
    <button class="btn" onclick="addToCart(1)">🛒 Mua ngay</button>
  </div>

  <div class="product-card">
    <img src="Image (2).png" alt="Yến chưng 2">
    <h3>Yến chưng 2</h3>
    <select id="size2">
      <option value="55">75ml – 55.000đ</option>
      <option value="85" selected>100ml – 85.000đ</option>
      <option value="110">150ml – 110.000đ</option>
      <option value="170">200ml – 170.000đ</option>
    </select>
    <button class="btn" onclick="addToCart(2)">🛒 Mua ngay</button>
  </div>

  <div class="product-card">
    <img src="Image (3).png" alt="Yến chưng 3">
    <h3>Yến chưng 3</h3>
    <select id="size3">
      <option value="55">75ml – 55.000đ</option>
      <option value="85" selected>100ml – 85.000đ</option>
      <option value="110">150ml – 110.000đ</option>
      <option value="170">200ml – 170.000đ</option>
    </select>
    <button class="btn" onclick="addToCart(3)">🛒 Mua ngay</button>
  </div>

  <div class="product-card">
    <img src="Image (4).png" alt="Yến chưng 4">
    <h3>Yến chưng 4</h3>
    <select id="size4">
      <option value="55">75ml – 55.000đ</option>
      <option value="85" selected>100ml – 85.000đ</option>
      <option value="110">150ml – 110.000đ</option>
      <option value="170">200ml – 170.000đ</option>
    </select>
    <button class="btn" onclick="addToCart(4)">🛒 Mua ngay</button>
  </div>

  <div class="product-card">
    <img src="Image (5).png" alt="Yến chưng 5">
    <h3>Yến chưng 5</h3>
    <select id="size5">
      <option value="55">75ml – 55.000đ</option>
      <option value="85" selected>100ml – 85.000đ</option>
      <option value="110">150ml – 110.000đ</option>
      <option value="170">200ml – 170.000đ</option>
    </select>
    <button class="btn" onclick="addToCart(5)">🛒 Mua ngay</button>
  </div>

  <div class="product-card">
    <img src="Image (6).png" alt="Yến chưng 6">
    <h3>Yến chưng 6</h3>
    <select id="size6">
      <option value="55">75ml – 55.000đ</option>
      <option value="85" selected>100ml – 85.000đ</option>
      <option value="110">150ml – 110.000đ</option>
      <option value="170">200ml – 170.000đ</option>
    </select>
    <button class="btn" onclick="addToCart(6)">🛒 Mua ngay</button>
  </div>

  <div class="product-card">
    <img src="Image (7).png" alt="Yến chưng 7">
    <h3>Yến chưng 7</h3>
    <select id="size7">
      <option value="55">75ml – 55.000đ</option>
      <option value="85" selected>100ml – 85.000đ</option>
      <option value="110">150ml – 110.000đ</option>
      <option value="170">200ml – 170.000đ</option>
    </select>
    <button class="btn" onclick="addToCart(7)">🛒 Mua ngay</button>
  </div>

  <div class="product-card">
    <img src="Image (8).png" alt="Yến chưng 8">
    <h3>Yến chưng 8</h3>
    <select id="size8">
      <option value="55">75ml – 55.000đ</option>
      <option value="85" selected>100ml – 85.000đ</option>
      <option value="110">150ml – 110.000đ</option>
      <option value="170">200ml – 170.000đ</option>
    </select>
    <button class="btn" onclick="addToCart(8)">🛒 Mua ngay</button>
  </div>

  <div class="product-card">
    <img src="Image (9).png" alt="Yến chưng 9">
    <h3>Yến chưng 9</h3>
    <select id="size9">
      <option value="55">75ml – 55.000đ</option>
      <option value="85" selected>100ml – 85.000đ</option>
      <option value="110">150ml – 110.000đ</option>
      <option value="170">200ml – 170.000đ</option>
    </select>
    <button class="btn" onclick="addToCart(9)">🛒 Mua ngay</button>
  </div>

  <div class="product-card">
    <img src="Image (10).png" alt="Yến chưng 10">
    <h3>Yến chưng 10</h3>
    <select id="size10">
      <option value="55">75ml – 55.000đ</option>
      <option value="85" selected>100ml – 85.000đ</option>
      <option value="110">150ml – 110.000đ</option>
      <option value="170">200ml – 170.000đ</option>
    </select>
    <button class="btn" onclick="addToCart(10)">🛒 Mua ngay</button>
  </div>

  <div class="product-card">
    <img src="Image (11).png" alt="Yến chưng 11">
    <h3>Yến chưng 11</h3>
    <select id="size11">
      <option value="55">75ml – 55.000đ</option>
      <option value="85" selected>100ml – 85.000đ</option>
      <option value="110">150ml – 110.000đ</option>
      <option value="170">200ml – 170.000đ</option>
    </select>
    <button class="btn" onclick="addToCart(11)">🛒 Mua ngay</button>
  </div>

</div>

<div id="popup-add">🛒 Đã thêm vào giỏ hàng!</div>
<div id="floating-cart-btn" onclick="toggleCartPopup()">🛒 Xem giỏ (<span id="cart-count">0</span>)</div>

<div class="cart-popup" id="cart-popup">
  <div class="cart-header">
    <h2>🛒 Giỏ hàng</h2>
    <button class="close-btn" onclick="toggleCartPopup('hide')">Đóng ❌</button>
  </div>
  <div id="cart-items"></div>
  <p><strong>Tổng:</strong> <span id="cart-total">0đ</span></p>
  <button class="btn" onclick="sendOrder()">📩 Gửi đơn hàng</button>
</div>

<script>
let cart = [];

function addToCart(i) {
  const select = document.getElementById("size" + i);
  const label = select.options[select.selectedIndex].text;
  const price = parseInt(select.value);
  cart.push({ name: "Yến chưng " + i, label, price });
  showAddPopup();
  updateCartCount();
  renderCart();
}

function renderCart() {
  const area = document.getElementById("cart-items");
  const totalText = document.getElementById("cart-total");
  area.innerHTML = "";
  let total = 0;
  cart.forEach((item, i) => {
    area.innerHTML += `<div class="cart-item">${i+1}. ${item.name} – ${item.label}
    <button onclick="removeFromCart(${i})" style="background:none; border:none; color:red;">❌</button></div>`;
    total += item.price;
  });
  totalText.innerText = total + ".000đ";
}

function removeFromCart(i) {
  cart.splice(i, 1);
  renderCart();
  updateCartCount();
}

function showAddPopup() {
  const pop = document.getElementById("popup-add");
  pop.style.display = "block";
  setTimeout(() => pop.style.display = "none", 2000);
}

function toggleCartPopup(force) {
  const popup = document.getElementById("cart-popup");
  if (force === "show") popup.style.display = "block";
  else if (force === "hide") popup.style.display = "none";
  else popup.style.display = popup.style.display === "block" ? "none" : "block";
}

function updateCartCount() {
  document.getElementById("cart-count").innerText = cart.length;
}

function sendOrder() {
  const name = prompt("Nhập tên của bạn:");
  const phone = prompt("Số điện thoại:");
  if (!name || !phone) return alert("Vui lòng nhập đầy đủ thông tin");

  let detail = "";
  let total = 0;
  cart.forEach((item, i) => {
    detail += `${i+1}. ${item.name} – ${item.label} (${item.price}.000đ)\n`;
    total += item.price;
  });

  fetch("https://script.google.com/macros/s/NEW_WEBHOOK_URL/exec", {
    method: "POST",
    body: JSON.stringify({
      name: name,
      phone: phone,
      size: "Tùy chọn",
      total: total,
      details: detail
    }),
    headers: { "Content-Type": "application/json" }
  }).then(res => {
    if (res.ok) {
      alert("✅ Đã gửi đơn!");
      cart = []; renderCart(); updateCartCount(); toggleCartPopup("hide");
    } else {
      alert("❌ Lỗi gửi đơn, thử lại sau.");
    }
  });
}
</script>

</body>
</html>
